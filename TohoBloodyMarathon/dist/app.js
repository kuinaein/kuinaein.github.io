!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=9)}([function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={Title_Logo_png:"third-party/title-logo.png",Orin_Title_png:"third-party/erl/orin-title.png",Satori_About_jpg:"third-party/erl/satori-about.jpg",SD_Orin_jpg:"third-party/erl/orin.jpg",SD_Minoriko_jpg:"third-party/erl/minoriko.jpg",SD_Kokoro_png:"third-party/erl/kokoro.png",SD_Reimu_jpg:"third-party/erl/reimu.jpg",Characters_Chireiden_png:"third-party/dispell/thv4_chireiden.png",Characters_Akisys_png:"third-party/dispell/thv4_akisys.png",Characters_Hina_png:"third-party/dispell/thv4_hina.png",Characters_Kokoro_png:"third-party/dispell/thv4_kokoroomen01-08.png",Characters_Tenshi_png:"third-party/dispell/thv4_tenshi.png",Characters_Iku_png:"third-party/dispell/thv4_iku.png",Characters_PC_png:"third-party/dispell/char_th0012.png",BG_Country_Platform_png:"third-party/country-platform-tiles-example.png",BG_Forest_png:"third-party/forest-931706_640.jpg",Result_Frame_png:"third-party/result-frame.png",SE_Transition_mp3:"third-party/lokif-gui-se/load.mp3",SE_GameStart_mp3:"third-party/lokif-gui-se/misc_sound.mp3",SE_Jump:"third-party/jumppp22.mp3",SE_Shock_mp3:"third-party/qubodupPunch05.mp3",SE_Result_mp3:"third-party/lokif-gui-se/save.mp3",BGM_Main_mp3:"third-party/adventuring_song.mp3"};if(!window.gResources){window.gResources=[];var r=!0,c=!1,a=void 0;try{for(var o,s=Object.keys(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var h=o.value;gResources.push(n[h])}}catch(t){c=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(c)throw a}}}},function(t,e,i){"use strict";function n(t,e,i){var n=(e||cc.Layer).extend(t),r=Object.assign({},{onEnter:function(){this._super();var t=new n;this.addChild(t)}},i||{});return cc.Scene.extend(r)}e.a=n},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return s});var r=i(3),c=i(0),a=function t(e,i,r,c,a){n(this,t),this.imageFilename=e,this.row=i,this.col=r,this.scale=c,this.flying=a},o=function t(e,i,c,o,s){n(this,t),this.name=e,this.playerCharacterSdImage=i,this.playerCharacterDef=new a(c.imageFilename,c.row,c.col,r.a.BASE_SCALE,!1),this.enemyDefs=[];var h=new a(o.imageFilename,o.row,o.col,r.a.BASE_SCALE,!1);this.enemyDefs.push(h),h=Object.assign({},h),h.scale=1.5*r.a.BASE_SCALE,this.enemyDefs.push(h),this.enemyDefs.push(new a(s.imageFilename,s.row,s.col,r.a.BASE_SCALE,!0))},s={};s["お燐"]=new o("お燐",c.a.SD_Orin_jpg,{imageFilename:c.a.Characters_Chireiden_png,row:0,col:2},{imageFilename:c.a.Characters_Chireiden_png,row:0,col:1},{imageFilename:c.a.Characters_Chireiden_png,row:0,col:3}),s["穣子"]=new o("穣子",c.a.SD_Minoriko_jpg,{imageFilename:c.a.Characters_Akisys_png,row:0,col:1},{imageFilename:c.a.Characters_Akisys_png,row:0,col:0},{imageFilename:c.a.Characters_Hina_png,row:0,col:0}),s["こころ"]=new o("こころ",c.a.SD_Kokoro_png,{imageFilename:c.a.Characters_Kokoro_png,row:1,col:3},{imageFilename:c.a.Characters_Tenshi_png,row:0,col:0},{imageFilename:c.a.Characters_Iku_png,row:0,col:0}),s["霊夢"]=new o("霊夢",c.a.SD_Reimu_jpg,{imageFilename:c.a.Characters_PC_png,row:0,col:0},{imageFilename:c.a.Characters_PC_png,row:0,col:2},{imageFilename:c.a.Characters_PC_png,row:0,col:1})},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={BASE_SCALE:2,CHARACTER_WIDTH:24,CHARACTER_HEIGHT:32,GRAZE_DISTANCE_SQ:0,COLLISION_TYPE_PLAYER:1,COLLISION_TYPE_ENEMY:2};n.GRAZE_DISTANCE_SQ=Math.pow(.8*n.CHARACTER_WIDTH,2)+Math.pow(.8*n.CHARACTER_HEIGHT,2)},function(t,e,i){"use strict";i.d(e,"a",function(){return _});var n=i(13),r=i.n(n),c=i(5),a=i(14),o=i(6),s=i(0),h=i(3),l=i(2),d=3*cc.winSize.height,u=1.5*cc.winSize.height,p={ctor:function(t){this._super(),this.chosenChatacterName=t,this.isLive=!0,this.enemyWait=0,this.enemies=[],this.mt=new r.a;var e=new cc.Sprite(s.a.BG_Forest_png);e.setScale(cc.winSize.width/640),e.setAnchorPoint(0,0),this.addChild(e);var i=new cc.Sprite(s.a.BG_Country_Platform_png);i.setAnchorPoint(0,0),i.setScale(h.a.BASE_SCALE),this.addChild(i),this.bg=i,this.initLabels(),this.initPhysics(),this.initPlayerCharacter();var n={event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this),onTouchEnded:this.onTouchEnded.bind(this)};return cc.eventManager.addListener(n,this),this.scheduleUpdate(),cc.audioEngine.playMusic(s.a.BGM_Main_mp3,!0),!0},initLabels:function(){this.score=0;var t=new cc.LabelTTF("","sans-serif",.06*cc.winSize.height);t.setAnchorPoint(cc.p(1,1)),t.setPosition(.98*cc.winSize.width,.98*cc.winSize.height),this.addChild(t);var e=c.a.get(c.a.KEY_HIGH_SCORE)||0,i=new cc.LabelTTF("ハイスコア： "+e+" 粟","sans-serif",.06*cc.winSize.height);i.setAnchorPoint(cc.p(1,1)),i.setPosition(t.x,t.y-.08*cc.winSize.height),this.addChild(i),this.scoreLabel=t},initPhysics:function(){var t=new cp.Space;t.gravity=cp.v(0,-d);var e=15*cc.winSize.height/100,i=new cp.BoxShape2(new cp.StaticBody,new cp.BB(0,0,cc.winSize.width,e));i.setFriction(1),i.setElasticity(0),t.addStaticShape(i),this.floorHeight=e,this.floorShape=i,t.addCollisionHandler(h.a.COLLISION_TYPE_PLAYER,h.a.COLLISION_TYPE_ENEMY,this.onCollision.bind(this)),this.space=t},initPlayerCharacter:function(){var t=new a.a(l.a[this.chosenChatacterName].playerCharacterDef,0,!1),e=t.getShape();e.setCollisionType(h.a.COLLISION_TYPE_PLAYER),this.addCharacter(t);var i=e.getBody();i.setMoment(Number.POSITIVE_INFINITY);var n=new cp.PinJoint(i,this.floorShape.getBody(),cp.v(0,0),cp.v(i.getPos().x,this.floorHeight));this.space.addConstraint(n),this.jointFloorAndCharacter=n,this.areJointedFloorAndCharacter=!0,this.playerCharacter=t},addCharacter:function(t){var e=t.getSprite(),i=e.getBody(),n=t.getShape(),r=this.floorHeight-n.getVert(0).y+t.getFlightLevel();i.setPos(cp.v(i.getPos().x,r)),this.addChild(e),this.space.addBody(i),this.space.addShape(n)},update:function(t){this._super(t),this.updatePlayerCharacter(),this.space.step(t),this.bg.setPositionX(this.bg.getPositionX()-2-.2*Math.floor(this.score/1e4));var e=this.bg.getBoundingBoxToWorld();return cc.winSize.width>e.x+e.width&&this.bg.setPositionX(e.x+e.width/3),this.updateEnemies(t),this.isLive&&(this.score+=Math.floor(1e3*t),this.scoreLabel.setString(this.score+" 粟")),!0},updatePlayerCharacter:function(){if(this.isLive){var t=this.playerCharacter.getSprite().getBody();!this.areJointedFloorAndCharacter&&0>t.getVel().y&&this.floorHeight+h.a.CHARACTER_HEIGHT/4>t.getPos().y&&(this.space.addConstraint(this.jointFloorAndCharacter),this.areJointedFloorAndCharacter=!0)}else if(this.areJointedFloorAndCharacter){this.areJointedFloorAndCharacter=!1,this.space.removeConstraint(this.jointFloorAndCharacter);var e=this.playerCharacter.getShape(),i=e.getBB();e.getBody().setMoment(cp.momentForBox(1,i.r-i.l,i.t-i.b))}},updateEnemies:function(t){for(var e=this.playerCharacter.getSprite(),i=e.getPosition(),n=!1,r=0;r<this.enemies.length;++r){var c=this.enemies[r],a=c.getSprite();h.a.GRAZE_DISTANCE_SQ*a.getScale()>cc.pDistanceSQ(i,a.getPosition())&&(this.score+=Math.floor(1e3*t),n=!0);var o=a.getBoundingBox();0>o.x+o.width&&(this.space.removeBody(a.getBody()),this.space.removeShape(c.getShape()),this.removeChild(a),this.enemies.splice(r,1),--r)}if(n){var s=cc.repeat(cc.sequence([cc.tintTo(.1,255,255,0),cc.tintTo(.1,255,255,255)]),2);e.runAction(s)}(0==this.enemies.length||.6*cc.winSize.width>this.enemies[this.enemies.length-1].getSprite().getPositionX())&&(this.enemyWait-=t,0>=this.enemyWait&&(this.generateEnemy(),this.enemyWait=this.mt.random()))},generateEnemy:function(){var t=l.a[this.chosenChatacterName].enemyDefs,e=t[this.mt.random_int()%t.length],i=0;e.flying&&(i=h.a.CHARACTER_HEIGHT*h.a.BASE_SCALE*(this.mt.random_int()%3)/2);var n=new a.a(e,i,!0);n.getShape().setCollisionType(h.a.COLLISION_TYPE_ENEMY);var r=n.getSprite().getBody();r.velocity_func=function(){},r.setPos(cp.v(cc.winSize.width,r.getPos().y));var c=150+15*Math.floor(this.score/1e4);r.setVel(cp.v(-c,0)),this.addCharacter(n),this.enemies.push(n)},isAbleToJump:function(){return this.floorHeight+this.playerCharacter.getSprite().getContentSize().height/2>this.playerCharacter.getSprite().getPositionY()},onTouchBegan:function(){return this.isAbleToJump()},onTouchEnded:function(){this.isAbleToJump()&&(this.space.removeConstraint(this.jointFloorAndCharacter),this.areJointedFloorAndCharacter=!1,this.playerCharacter.getSprite().getBody().setVel(cp.v(0,u)),cc.audioEngine.playEffect(s.a.SE_Jump))},onCollision:function(){if(this.isLive){this.isLive=!1,cc.eventManager.removeAllListeners();var t=new o.a(this.score,this.chosenChatacterName),e=cc.sequence([cc.tintTo(1,255,0,0),cc.callFunc(function(){cc.director.runScene(t)})]);this.bg.runAction(e),cc.audioEngine.stopMusic()}return cc.audioEngine.playEffect(s.a.SE_Shock_mp3),!0}},g={ctor:function(t){this._super(),this.chosenCharacterName=t},onEnter:function(){this._super();var t=cc.Layer.extend(p),e=new t(this.chosenCharacterName);this.addChild(e)}},_=cc.Scene.extend(g)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return c});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(){n(this,t)}return r(t,null,[{key:"get",value:function(t){if(localStorage)return localStorage.getItem(t)}},{key:"set",value:function(t,e){localStorage?localStorage.setItem(t,e):console.error("localStorageが無効で保存できない： "+t)}}]),t}();c.KEY_HIGH_SCORE="toho_bloody_marathon.highscore",c.KEY_HIGH_SCORE_CHARACTER="toho_bloody_marathon.highscore.character"},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(5),r=i(0),c={ctor:function(t,e){this._super();var i=parseInt(n.a.get(n.a.KEY_HIGH_SCORE)||0);isNaN(i)&&(i=0),t>i&&(n.a.set(n.a.KEY_HIGH_SCORE,""+t),n.a.set(n.a.KEY_HIGH_SCORE_CHARACTER,""+e));var c=new cc.Sprite(r.a.BG_Forest_png);c.setScale(cc.winSize.width/640),c.setAnchorPoint(0,0),this.addChild(c);var a=new cc.Sprite(r.a.Result_Frame_png);a.setScale(.6),a.x=cc.winSize.width/2,a.y=cc.winSize.height/2,this.addChild(a);var o=new cc.LabelTTF("走行記録","serif",.1*cc.winSize.height);if(o.setFontFillColor(cc.color.BLACK),o.x=cc.winSize.width/2,o.y=.75*cc.winSize.height,this.addChild(o),this.initScoreLabels(i,t),t>i){var s=new cc.LabelTTF("記録更新！","sans-serif",.07*cc.winSize.height);s.setFontFillColor(cc.color(199,60,46,255)),s.x=cc.winSize.width/2,s.y=.3*cc.winSize.height,s.runAction(cc.repeatForever(cc.blink(1.5,1))),this.addChild(s)}return cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:function(){return cc.eventManager.removeAllListeners(),cc.director.runScene(new tbm.TitleScene),!1}},this),cc.audioEngine.playEffect(r.a.SE_Result_mp3),!0},initScoreLabels:function(t,e){var i=new cc.LabelTTF("ハイスコア","sans-serif",.05*cc.winSize.height);i.setFontFillColor(cc.color.BLACK),i.setAnchorPoint(cc.p(0,1)),i.x=.25*cc.winSize.width,i.y=.6*cc.winSize.height,this.addChild(i);var n=new cc.LabelTTF(t+" 粟","sans-serif",.05*cc.winSize.height);n.setFontFillColor(cc.color.BLACK),n.setAnchorPoint(cc.p(0,0)),n.x=.3*cc.winSize.width,n.y=0,i.addChild(n);var r=new cc.LabelTTF("今回の記録","sans-serif",.05*cc.winSize.height);r.setFontFillColor(cc.color.BLACK),r.setAnchorPoint(cc.p(0,1)),r.x=0,r.y=.05*-cc.winSize.height,i.addChild(r);var c=new cc.LabelTTF(e+" 粟","sans-serif",.05*cc.winSize.height);c.setFontFillColor(cc.color.BLACK),c.setAnchorPoint(cc.p(0,0)),c.x=.3*cc.winSize.width,c.y=0,r.addChild(c)}},a={ctor:function(t,e){this._super(),this.score=t,this.chosenCharacterName=e},onEnter:function(){this._super();var t=cc.Layer.extend(c),e=new t(this.score,this.chosenCharacterName);this.addChild(e)}},o=cc.Scene.extend(a)},,,function(t,e,i){"use strict";function n(t){t.message?alert(t.message):alert(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(i(0),i(10)),c=i(4),a=i(6);window.addEventListener("error",n),window.addEventListener("unhandledrejection",n),window.tbm=window.tbm||{},Object.assign(window.tbm,{TitleScene:r.a,MainScene:c.a,ResultScene:a.a})},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(1),r=i(0),c=i(11),a=i(12),o={ctor:function(){this._super();var t=cc.winSize,e=new cc.Sprite(r.a.BG_Forest_png);e.setScale(cc.winSize.width/640),e.setAnchorPoint(0,0),this.addChild(e);var i=new cc.Sprite(r.a.Orin_Title_png);i.setAnchorPoint(cc.p(0,0)),i.setPositionX(-.01*cc.winSize.width),i.setScale(.3),this.addChild(i);var n=new cc.Sprite(r.a.Title_Logo_png);n.setScale(1.5),n.x=t.width/2,n.y=8*t.height/10,this.addChild(n),this.initStartLabel(),this.initAboutButton();var c={event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this)};return cc.eventManager.addListener(c,this),!0},initStartLabel:function(){var t=new cc.LabelTTF("画面をタップしてスタート","sans-serif",.07*cc.winSize.height);t.setFontFillColor(cc.color.BLACK),t.x=.5*cc.winSize.width,t.y=.3*cc.winSize.height,this.addChild(t);var e=t.getContentSize(),i=new cc.LayerColor(cc.color(255,255,255,128),e.width,e.height);t.addChild(i,-1)},initAboutButton:function(){var t=new cc.DrawNode;t.setAnchorPoint(1,0),this.centerOfAboutButon=cc.p(.9*cc.winSize.width,.2*cc.winSize.height),this.radiusOfAboutButton=.15*cc.winSize.height,t.drawDot(this.centerOfAboutButon,this.radiusOfAboutButton,cc.color(255,255,255,224)),this.addChild(t);var e=new cc.LabelTTF("このアプリに\nついて...","sans-serif",.04*cc.winSize.height);e.setFontFillColor(cc.color.BLACK),e.setAnchorPoint(.5,0),e.x=.9*cc.winSize.width,e.y=.13*cc.winSize.height,e.setTag(33),this.addChild(e)},onTouchBegan:function(t,e){return cc.eventManager.removeAllListeners(),Math.pow(this.radiusOfAboutButton,2)>cc.pDistanceSQ(t.getLocation(),this.centerOfAboutButon)?(cc.director.runScene(new c.a),cc.audioEngine.playEffect(r.a.SE_Transition_mp3)):(cc.director.runScene(new a.a),cc.audioEngine.playEffect(r.a.SE_Transition_mp3)),!1}},s=Object(n.a)(o)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(1),r=i(0),c={ctor:function(){this._super(cc.color.WHITE);var t=new cc.Sprite(r.a.Satori_About_jpg);t.setScale(.4),t.setOpacity(48),t.setAnchorPoint(cc.p(1,0)),t.x=.8*cc.winSize.width,this.addChild(t);var e=new cc.LabelTTF("東方血吐走について","serif",.12*cc.winSize.height);e.setAnchorPoint(cc.p(.5,1)),e.setFontFillColor(cc.color.BLACK),e.x=cc.winSize.width/2,e.y=.95*cc.winSize.height,this.addChild(e),this.initCreditTitle();var i=new cc.LabelTTF("なお、本作品は水鶏の個人制作であり、\n上記の方々とは、素材の提供を除き一切関係がありません。","sans-serif",.04*cc.winSize.height);i.setFontFillColor(cc.color.BLACK),i.setAnchorPoint(cc.p(0,0)),i.setPosition(cc.p(.1*cc.winSize.width,.05*cc.winSize.height)),this.addChild(i);var n={event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this)};cc.eventManager.addListener(n,this)},initCreditTitle:function(){var t=new cc.LabelTTF("- 本作品に登場するキャラクターや世界観等の著作権は、\n   上海アリス幻樂団様が保有しています。\n- その他、下記の方々の素材を利用させていただきました。\n   - spellyon様    配布元サイト「点睛集積」\n   - エルル様    配布元サイト「えるるのだいあり」\n     他多数\n    ※上記は利用にあたりクレジット表記が必須とされているもののみ","sans-serif",.04*cc.winSize.height);t.setFontFillColor(cc.color.BLACK),t.setAnchorPoint(cc.p(0,1)),t.setPosition(cc.p(.1*cc.winSize.width,.75*cc.winSize.height)),this.addChild(t)},onTouchBegan:function(t,e){return cc.eventManager.removeAllListeners(),cc.director.runScene(new tbm.TitleScene),cc.audioEngine.playEffect(r.a.SE_Transition_mp3),!1}},a=Object(n.a)(c,cc.LayerColor)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(1),r=i(0),c=i(2),a=i(4),o={ctor:function(){this._super();var t=new cc.Sprite(r.a.BG_Forest_png);t.setScale(cc.winSize.width/640),t.setAnchorPoint(0,0),this.addChild(t);var e=new cc.LabelTTF("自機\n選択","sans-serif",.1*cc.winSize.height);e.setAnchorPoint(0,1),e.setFontFillColor(cc.color.BLACK),e.setPosition(cc.p(.05*cc.winSize.width,.95*cc.winSize.height)),this.addChild(e);var i=e.getContentSize(),n=new cc.LayerColor(cc.color(255,255,255,128),1.4*i.width,1.1*i.height);n.setPosition(cc.p(.2*-i.width,.05*-i.height)),e.addChild(n,-1);var a=[{anchor:cc.p(1,0),def:c.a["お燐"]},{anchor:cc.p(0,0),def:c.a["穣子"]},{anchor:cc.p(1,1),def:c.a["こころ"]},{anchor:cc.p(0,1),def:c.a["霊夢"]}];this.characterTiles=[];var o=!0,s=!1,h=void 0;try{for(var l,d=a[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var u=l.value,p=new cc.Sprite(u.def.playerCharacterSdImage),g=p.getContentSize();p.setScale(.45*cc.winSize.height/g.height),p.setAnchorPoint(u.anchor),p.x=cc.winSize.width/2+(u.anchor.x?-5:5),p.y=cc.winSize.height/2+(u.anchor.y?-5:5),p._tbmCharacterName=u.def.name,this.addChild(p),this.characterTiles.push(p)}}catch(t){s=!0,h=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw h}}var _={event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this)};return cc.eventManager.addListener(_,this),!0},onTouchBegan:function(t,e){var i=this,n=!0,c=!1,o=void 0;try{t:for(var s,h=this.characterTiles[Symbol.iterator]();!(n=(s=h.next()).done);n=!0){var l=s.value,d=function(e){var n=e.getBoundingBoxToWorld();if(!cc.rectContainsPoint(n,t.getLocation()))return"continue";cc.eventManager.removeAllListeners();var c=new cc.DrawNode;return c.drawRect(cc.p(n.x,n.y),cc.p(n.x+n.width,n.y+n.height),cc.color(0,0,0,0),.08*cc.winSize.height,cc.color(0,255,0,192)),c.runAction(cc.sequence([cc.blink(1,2),cc.callFunc(function(){cc.director.runScene(new a.a(e._tbmCharacterName))})])),i.addChild(c),cc.audioEngine.playEffect(r.a.SE_GameStart_mp3),"break"}(l);switch(d){case"continue":continue;case"break":break t}}}catch(t){c=!0,o=t}finally{try{!n&&h.return&&h.return()}finally{if(c)throw o}}return!1}},s=Object(n.a)(o)},function(t,e){var i=function(t){void 0==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};i.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){var t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},i.prototype.init_by_array=function(t,e){var i,n,r;for(this.init_seed(19650218),i=1,n=0,r=this.N>e?this.N:e;r;r--){var c=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(1664525*((4294901760&c)>>>16)<<16)+1664525*(65535&c))+t[n]+n,this.mt[i]>>>=0,i++,n++,i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1),n>=e&&(n=0)}for(r=this.N-1;r;r--){var c=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(1566083941*((4294901760&c)>>>16)<<16)+1566083941*(65535&c))-i,this.mt[i]>>>=0,i++,i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1)}this.mt[0]=2147483648},i.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var i;for(this.mti==this.N+1&&this.init_seed(5489),i=0;i<this.N-this.M;i++)t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK,this.mt[i]=this.mt[i+this.M]^t>>>1^e[1&t];for(;i<this.N-1;i++)t=this.mt[i]&this.UPPER_MASK|this.mt[i+1]&this.LOWER_MASK,this.mt[i]=this.mt[i+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},i.prototype.random_int31=function(){return this.random_int()>>>1},i.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},i.prototype.random=function(){return this.random_int()*(1/4294967296)},i.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},i.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},t.exports=i},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",function(){return a});var r=i(3),c=(i(2),function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()),a=function(){function t(e,i,c){n(this,t),this.def=e,this.flightLevel=i;var a=cc.rect(r.a.CHARACTER_WIDTH*this.def.col*3,r.a.CHARACTER_HEIGHT*(4*this.def.row+(c?3:1)),r.a.CHARACTER_WIDTH,r.a.CHARACTER_HEIGHT),o=new cc.SpriteFrame(this.def.imageFilename,a),s=new cc.PhysicsSprite(o);s.setScale(this.def.scale),s.setAnchorPoint(cc.p(.5,0));var h=.5*r.a.CHARACTER_WIDTH*this.def.scale,l=.8*r.a.CHARACTER_HEIGHT*this.def.scale,d=.1*r.a.CHARACTER_HEIGHT*this.def.scale,u=new cp.Body(1,cp.momentForBox(1,h,l));u.setPos(cp.v(1*cc.winSize.width/10,0)),this.shape=new cp.BoxShape2(u,new cp.BB(-h/2,d,h/2,d+l)),this.shape.setElasticity(1),this.shape.setFriction(1),s.setBody(u),this.sprite=s,this._initAnimation()}return c(t,[{key:"_initAnimation",value:function(){for(var t=this.getSprite().getSpriteFrame(),e=t.getRect(),i=[],n=0;n<3;++n){var c=t.clone();c.setRect(cc.rect(e.x+n*r.a.CHARACTER_WIDTH,e.y,e.width,e.height)),i.push(c)}var a=new cc.Animation(i,.1);a.setRestoreOriginalFrame(!0),this.sprite.runAction(cc.repeatForever(new cc.Animate(a)))}},{key:"getDef",value:function(){return this.def}},{key:"getFlightLevel",value:function(){return this.flightLevel}},{key:"getSprite",value:function(){return this.sprite}},{key:"getShape",value:function(){return this.shape}}]),t}()}]);
//# sourceMappingURL=app.js.map